@(user: ActiveUser,
  members: List[Member],
  fee: Option[org.joda.money.Money],
  totalFee: org.joda.money.Money)(implicit request: Request[Any],
    flash: Flash,
    handler: be.objectify.deadbolt.scala.DeadboltHandler)

@import models.UserRole.Role._
@import be.objectify.deadbolt.scala.views.html._
@import be.objectify.deadbolt.core.utils.TemplateUtils._
@import views.Countries

@v2.main("Members", "members", user) {
    <div class="row page-content">
        <div class="container">
            <div class="row">
                <div class="col-md-12 content-block">
                    <div class="row block">
                        <div class="col-md-12">
                            <div class="page-header">
                                <h2>Total Fee â‚¬@totalFee.getAmount
                                    @restrict(handler, List(as(Admin.toString))) {
                                        <a class="btn btn-primary pull-right" href="@routes.Members.add()">Add Member</a>
                                    }
                                </h2>
                            </div>
                            <div class="col-md-12">
                                <div id="filter-containter">
                                    <div class="table-filters pull-left membership">
                                        <span>Filter by membership: </span>
                                        <div class="filter">
                                            <a href="#" class="active" data-type="all">All</a>&nbsp;<span class="counter">@members.length</span>
                                        </div>
                                        <div class="filter">
                                            <a href="#" data-type="funder">Funders</a>&nbsp;<span class="counter">@members.count(_.funder)</span>
                                        </div>
                                        <div class="filter">
                                            <a href="#" data-type="supporter">Supporters</a>&nbsp;<span class="counter">@members.count(_.funder == false)</span>
                                        </div>
                                    </div>
                                    <div class="table-filters pull-left type">
                                        <span>Filter by type:</span>
                                        <div class="filter">
                                            <a href="#" class="active" data-type="all">All</a>&nbsp;<span class="counter">@members.length</span>
                                        </div>
                                        <div class="filter">
                                            <a href="#" data-type="org">Organisations</a>&nbsp;<span class="counter">@members.count(_.person == false)</span>
                                        </div>
                                        <div class="filter">
                                            <a href="#" data-type="person">People</a>&nbsp;<span class="counter">@members.count(_.person)</span>
                                        </div>
                                    </div>
                                </div>
                                <table id="people" class="datatables table">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th class="sorting_asc" width="25%">Name</th>
                                            <th>Location</th>
                                            <th>Type</th>
                                            <th>Member Since</th>
                                            <th>Member Until</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    @for(member <- members) {
                                        <tr>
                                            <td style="text-align: center;">@if(member.person){
                                                <i class="glyphicon glyphicon-user"></i>
                                            }else{
                                                <i class="glyphicon glyphicon-home"></i>
                                            }</td>
                                            <td><a href="@if(member.person) {
                                                @controllers.core.routes.People.details(member.objectId) } else {
                                                @controllers.core.routes.Organisations.details(member.objectId) }">@member.name</a></td>
                                            <td>@member.city.map { city => @city, } @Countries.name(member.countryCode)</td>
                                            <td>@if(member.funder){
                                                <span class="text-sm">funder</span>
                                            }else{
                                                <span class="text-sm">supporter</span>
                                            }</td>
                                            <td>@member.since</td>
                                            <td>@member.until</td>
                                            <td>@member.person</td>
                                        </tr>
                                    }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="@routes.Assets.at("member/index.js")" type="text/javascript"></script>
}
