@(person: Person, card: models.core.payment.CreditCard, customerId: Long, apiKey: String)

<link rel="stylesheet" media="screen" href="@routes.Assets.at("css/payment-form.css")">
<script type="text/javascript" src="https://js.stripe.com/v2/"></script>
<script src="@routes.Assets.at("javascripts/jquery.payment.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("js/element/creditcard.js")" type="text/javascript"></script>
<script type="text/javascript">
    Stripe.setPublishableKey("@apiKey");
</script>

<div class="b-contrib block">
    <h4 class="b-contrib__title">Contribution</h4>
    <table class="b-contrib__table table">
        <tr>
            <td>
                <b>Contribution level</b>
            </td>
            <td>
                <div class="b-contrib__price">
                    <span>30&#8364;</span>
                </div>
            </td>
            <td class="h-aright">
                <a href="#" class="link-mblue" data-toggle="modal" data-target="#dlg-change-level">Change level</a>
            </td>
        </tr>
        <tr>
            <td>
                <b>Payment card</b>
            </td>
            <td>
                @card.brand x-@card.number <br>
                @if(card.expired) {
                    <span class="b-contrib__hint">expired</span>
                } else {
                    <span class="b-contrib__hint">expire @{"%02d".format(card.expMonth)}/@card.expYear</span>
                }
            </td>
            <td class="h-aright">
                <a href="#" class="link-mblue" data-toggle="modal"  data-target="#dlg-change-card">Change card</a>
            </td>
        </tr>
    </table>
</div>

<div id="dlg-change-level" class="modal fade b-modal dlg-contrib" tabindex="-1" role="dialog" aria-labelledby="requestLabel" aria-hidden="true">
@v2.html.modal("", "") {
    <h2 class="dlg-contrib__title">
        Change contribution level
    </h2>
    <div class="dlg-contrib__text">
        You can change contribution level, but it should be equal or above the minimum level. Minimum  level is depend on your country. <br>
        If you decrease contribution level, we’ll not return money but next year your membership will chiper for amount of difference. <br>
        Changing contribution level doesn’t reflect on membership exparation date.
    </div>
    @{/*@views.html.v2.element.payment(form, person, apiKey, fee, org)*/}
    @views.html.v2.element.paymentInfo()

}
</div>


<div id="dlg-change-card" class="modal fade b-modal dlg-contrib" tabindex="-1" role="dialog" aria-labelledby="requestLabel" aria-hidden="true">
@v2.html.modal("", "") {
    <h2 class="dlg-contrib__title">
        Change payment card information
    </h2>
    <div class="b-payment">
        <form class="b-payment__form " action="@controllers.core.routes.Customers.updateCard(customerId)"
            method="POST" id="payment-form" autocomplete="on">
            @views.html.v2.element.card()
            <div class="b-card__buttons">
                <button type="submit" class="btn btn-primary b-card__submit">Approve card</button>
            </div>
        </form>
    </div>
    @views.html.v2.element.paymentInfo()
}
</div>