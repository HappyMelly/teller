@(person: Person,
    width: String)(implicit request: Request[Any],
    handler: AuthorisationHandler)

@import be.objectify.deadbolt.scala.views.html._
@import models.UserRole.DynamicRole

<div class="b-avatar @if(person.photo.url.nonEmpty) { b-avatar_stat_real }">
@dynamicOr(handler, DynamicRole.ProfileEditor, person.identifier.toString) {
    @person.photo.url.map { photo =>
      <div id="real">
        <img width="@width" class="b-avatar__img" src="@photo"/>
      </div>
    }.getOrElse {
      <div id="real" style="display:none;">
        <img width="@width" class="b-avatar__img" src=""/>
      </div>
    }

    <div id="stub" @if(person.photo.url.nonEmpty) { style="display:none;" }>
      <a href="#" class="choosePhotoLink" data-toggle="modal" data-target="#photoDialog">
        <img class="b-avatar__img" width="@width"
          src="@routes.Assets.at("images/add-photo.png")"/></a>
    </div>

    <div class="b-avatar__action">
      <a href="#" class="link-white choosePhotoLink"
        data-toggle="modal"
        data-target="#photoDialog">
          Edit
      </a>
      <a href="#" class="link-white"
        id="btnPhotoDelete"
        data-href="@routes.ProfilePhotos.delete(person.id.get)">
          Delete
      </a>
    </div>
  }{
    @person.photo.url.map { photo =>
      <img width="@width" class="photo b-avatar__img" src="@photo"/>
    }.getOrElse {
      <img class="b-avatar__img" width="@width"
        src="@routes.Assets.at("images/add-photo.png")"/>
    }
  }
</div>
<div id="photoDialog" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" id="choosePhotoContent">
  </div>
</div>
