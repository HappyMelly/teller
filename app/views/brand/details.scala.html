@(user: securesocial.core.Identity,
  brand: Brand,
  coordinator: Person,
  eventTypes: List[EventType]
)(implicit request: Request[Any], flash: Flash, handler: AuthorisationHandler, token: play.filters.csrf.CSRF.Token)

@import helper.CSRF
@import models.UserRole.Role._
@import templates.Formatters._
@import be.objectify.deadbolt.scala.views.html._
@import be.objectify.deadbolt.core.utils.TemplateUtils._

@main(brand.code + " - Brand", Some(user)) {

  <div class="span8">
    <header>

    <h1>
      @brand.name
      @restrict(handler, List(as(Editor.toString))) {
        <a class="btn-small btn"href="@routes.Brands.edit(brand.code)"><i class="icon-pencil"></i> Edit</a>
      }
    </h1>
    <p><small>Added by @brand.createdBy on @brand.created.format <br> Updated by @brand.updatedBy on @brand.updated.format</small></p>
    </header>
  </div>

  @restrict(handler, List(as(Editor.toString))) {
    <div class="span2 actions">
      <form class="delete" method="post" text="brand" action="@CSRF(routes.Brands.delete(brand.code))">
        <button class="btn btn-danger btn-block" type="submit" @if(!brand.deletable) { disabled="disabled" title="You cannot delete this brand because it has products, licenses or bookings" }>
          <i class="icon-white icon-trash"></i> Delete
        </button>
      </form>
    </div>
  }

  <div class="span4">
    <h3>Brand details</h3>

    <p><strong>Brand code</strong>
    <br>@brand.code</p>
      <p><strong>Brand coordinator</strong>
    <br><a href="@routes.People.details(coordinator.id.get)">@coordinator.fullName</a></p>
    @brand.description.map { desc =>
    <p>
      <strong>Description</strong><br/>@desc.markdown
    </p>
    }
    <p><strong>Status</strong>
    <br/><span class="label @Messages(s"models.BrandStatus." + brand.status + ".label")">@Messages(s"models.BrandStatus." + brand.status)</span>
  </div>
  <div class="span4">
    @brand.picture.map { picture =>
      <form class="delete" method="post" text="image" action="@CSRF(routes.Brands.deletePicture(brand.code))">
        <h3>Picture
          @restrict(handler, List(as(Editor.toString))) {
            <button class="btn btn-danger" type="submit">
              <i class="icon-white icon-trash"></i> Delete Picture
            </button>
          }
        </h3>
      </form>
      <a href="@routes.Brands.picture(brand.code).url">
          <img src="@routes.Brands.picture(brand.code).url"/></a>
    }
    <h3>Products</h3>
    @if(brand.products.isEmpty) {
      <p>This brand doesn't have any products.</p>
    } else {
      @views.html.product.table(brand.products, true) { product => @None }
    }
  </div>
  <div class="span8">
      <h3>Event Types</h3>
      @if(eventTypes.isEmpty) {
        <p>There are no event types.</p>
      } else {
      <table  class="datatables table table-bordered">
          <thead>
          <th>Name</th>
          <th>Default Title</th>
          <th></th>
          </thead>
          <tbody>
          @for(eventType <- eventTypes) {
          <tr>
              <td>@eventType.name</td>
              <td>@eventType.defaultTitle</td>
              <td>
                  @restrict(handler, List(as(Editor.toString))) {
                  <a href="@routes.EventTypes.delete(eventType.id.get)">
                  <i class="icon-pencil"></i>Remove event type</a>
                  }
              </td>
          </tr>
          }
          </tbody>
      </table>
      }
      @restrict(handler, List(as(Editor.toString))) {
        <form class="form-inline" method="POST" action="@CSRF(routes.EventTypes.create)" id="eventType">
          <input type="hidden" name="brandId" value="@brand.id"/>
          <div class="controls-row control-group">
              <input name="name" placeholder="Name"/>
              <input name="defaultTitle" placeholder="Default Title"/>
              <button class="btn"><i class="icon-plus"></i>Add Event Type</button>
          </div>
        </form>
      }
  </div>
	<script src="@routes.Assets.at("details.js")" type="text/javascript"></script>
}
