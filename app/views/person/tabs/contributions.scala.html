@(person: Person,
  contributions: List[ContributionView])(implicit request: Request[Any],
    flash: Flash,
    handler: AuthorisationHandler,
    token: play.filters.csrf.CSRF.Token)

@import be.objectify.deadbolt.scala.views.html._
@import be.objectify.deadbolt.core.utils.TemplateUtils._
@import helper.CSRF
@import models.UserRole.Role._

@if(contributions.isEmpty) {
    <p>@person.fullName has no contributions.</p>
} else {
    <table class="datatables table table-bordered">
        <thead>
            <th>Product</th>
            <th>Role</th>
            <th></th>
        </thead>
        <tbody>
        @for(contribution <- contributions) {
            <tr>
                <td><a href="@routes.Products.details(contribution.product.id.getOrElse(0))">@contribution.product.title</a></td>
                <td>@contribution.contribution.role</td>
                <td>
                @restrict(handler, List(as(Editor.toString))) {
                    <a href="@routes.Contributions.delete(contribution.contribution.id.get, "person")">
                        <i class="glyphicon glyphicon-pencil"></i> Remove contribution</a>
                }
                </td>
            </tr>
        }
        </tbody>
    </table>
}